<!DOCTYPE html>
<html lang="en">
<head>
  <!-- SEO metadata remains unchanged and optimized -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Daily Water Intake Calculator - How Much Water Should You Drink?</title>
  <meta name="description" content="A simple, free water intake calculator to find your personalized daily hydration goal. Determines how much water to drink based on weight, age, gender, and activity.">
  <link rel="canonical" href="https://waterintakecalc.com/">
  <meta property="og:title" content="Daily Water Intake Calculator">
  <meta property="og:description" content="Get a science-based, personalized water intake goal in seconds with our free and easy-to-use calculator.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://waterintakecalc.com/">
  <meta property="og:image" content="https://waterintakecalc.com/og-image.png">
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WBZFFH6T');</script>
  <!-- End Google Tag Manager -->
  
  <!-- Schema Markup remains unchanged -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [{
      "@type": "Question",
      "name": "How much water should you drink according to your weight?",
      "acceptedAnswer": { "@type": "Answer", "text": "Weight is a primary factor. A common guideline is to drink between 0.5 to 1 ounce of water for each pound of body weight. Our calculator refines this estimate by also considering your age, gender, and activity level." }
    }, {
      "@type": "Question",
      "name": "Is 2 litres of water enough to drink each day?",
      "acceptedAnswer": { "@type": "Answer", "text": "For many, 2 liters (about 68 oz) is a reasonable baseline. However, this may be insufficient if you exercise intensely or live in a hot climate. A personalized calculation is more accurate." }
    }, {
      "@type": "Question",
      "name": "Does coffee count as water intake?",
      "acceptedAnswer": { "@type": "Answer", "text": "Yes, research from institutions like the Mayo Clinic confirms that the water in caffeinated beverages like coffee and tea contributes to your daily total. However, plain water is always the best choice for hydration." }
    }]
  }
  </script>
  
  <!-- Styles -->
  <style>
    :root { --primary-color: #0d6efd; --background-color: #f8f9fa; --text-color: #212529; --card-bg-color: #ffffff; --border-color: #dee2e6; --result-bg-color: #e7f5ff; --result-border-color: #90cfff; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: var(--background-color); color: var(--text-color); margin: 0; padding: 20px; line-height: 1.6; }
    .container { max-width: 650px; width: 100%; margin: auto; }
    .header { text-align: center; margin-bottom: 30px; }
    .logo { color: var(--primary-color); font-size: 2.5em; display: inline-block; line-height: 1; }
    h1 { font-size: 2.2em; margin: 10px 0; display: inline-block; vertical-align: middle; margin-left: 10px; }
    .subtitle { font-size: 1.1em; color: #6c757d; margin-top: 5px; }
    .calculator-card { background: var(--card-bg-color); padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06); }
    .form-section { margin-bottom: 20px; text-align: left; }
    label { display: block; margin-bottom: 12px; font-weight: 500; }
    input[type="number"], select { width: 100%; padding: 12px; margin-top: 6px; font-size: 1rem; border-radius: 8px; border: 1px solid var(--border-color); box-sizing: border-box; transition: border-color 0.2s, box-shadow 0.2s; }
    .input-group { display: flex; }
    .input-group input { border-top-right-radius: 0; border-bottom-right-radius: 0; }
    .input-group select { width: 85px; border-left: 0; border-top-left-radius: 0; border-bottom-left-radius: 0; }
    input:focus, select:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25); }
    button { width: 100%; background-color: var(--primary-color); color: white; padding: 15px; font-size: 1.2rem; border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.2s; font-weight: bold; margin-top: 10px;}
    button:hover { background-color: #0b5ed7; }
    #result-section { padding: 0; border-radius: 12px; background-color: var(--result-bg-color); border: 1px solid var(--result-border-color); text-align: center; margin-bottom: 25px; overflow: hidden; max-height: 0; opacity: 0; transition: all 0.5s ease-in-out; }
    #result-section.visible { padding: 20px; max-height: 1200px; opacity: 1; }
    .result-primary { font-size: 2rem; font-weight: bold; color: var(--primary-color); display: block; }
    .result-secondary { font-size: 1rem; color: #0a58ca; margin-top: 8px; display: block; }
    .result-explanation { font-size: 0.9rem; color: #555; margin-top: 15px; line-height: 1.5; }
    .checkbox-label { display: flex; align-items: center; font-weight: normal; }
    .checkbox-label input { width: auto; margin: 0 10px 0 0; }
    .content-section { text-align: left; margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--border-color); }
    .content-section h2, .content-section h3 { color: var(--text-color); }
    .content-section p, .content-section ul { color: #495057; }
    .content-section blockquote { border-left: 4px solid var(--primary-color); padding-left: 15px; margin: 20px 0; font-style: italic; color: #555; }
    .faq-item { margin-bottom: 20px; }
    /* --- NEW STYLES FOR AI FEATURE --- */
    #ai-button { background-color: #198754; color: white; display: none; margin-top: 20px; transition: background-color 0.2s; }
    #ai-button:hover { background-color: #157347; }
    #ai-button:disabled { background-color: #6c757d; cursor: not-allowed; }
    #ai-result { text-align: left; margin-top: 20px; padding: 15px; border-top: 2px solid #b3dfc3; color: #0f5132; line-height: 1.6; white-space: pre-wrap; display: none; }
  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WBZFFH6T"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="container">
    <header class="header">
      <span class="logo" aria-hidden="true">ðŸ’§</span>
      <h1>Daily Water Intake Calculator</h1>
      <p class="subtitle">Get a personalized hydration goal in seconds.</p>
    </header>

    <main>
      <!-- --- OPTIMIZED LAYOUT: Result section is now above the form --- -->
      <div id="result-section">
        <span class="result-primary"></span>
        <span class="result-secondary"></span>
        <p class="result-explanation"></p>
        <!-- --- NEW AI ELEMENTS ADDED HERE --- -->
        <div id="ai-result"></div>
        <button id="ai-button">Get AI-Powered Hydration Tips</button>
      </div>

      <div class="calculator-card">
        <!-- The form structure is the same -->
        <div class="form-section">
            <label for="age">Your Age (years)</label>
            <input id="age" type="number" min="1" max="120" value="30" required>
        </div>
        <div class="form-section">
            <label for="weight">Your Weight</label>
            <div class="input-group">
                <input id="weight" type="number" min="1" max="500" value="150" required>
                <select id="weightUnit" aria-label="Weight unit">
                    <option value="lbs" selected>lbs</option>
                    <option value="kg">kg</option>
                </select>
            </div>
        </div>
        <div class="form-section">
            <label for="gender">Your Gender</label>
            <select id="gender">
                <option value="male" selected>Male</option>
                <option value="female">Female</option>
            </select>
        </div>
        <div class="form-section">
            <label for="activityLevel">Daily Activity Level</label>
            <select id="activityLevel">
                <option value="sedentary">Sedentary</option>
                <option value="light" selected>Light</option>
                <option value="moderate">Moderate</option>
                <option value="high">High</option>
                <option value="extreme">Extreme</option>
            </select>
        </div>
        <div class="form-section">
            <label class="checkbox-label">
                <input id="isTropical" type="checkbox"> I am in a tropical climate
            </label>
        </div>
        
        <button id="calc">Calculate</button>
      </div>

      <!-- The authoritative content section remains unchanged -->
      <section class="content-section">
        <h2>Why a Personalized Water Intake Calculation Matters</h2>
        <p>Proper hydration is vital for energy levels, brain function, and overall health. While general advice like "drink 8 glasses a day" is common, it fails to consider the unique factors that determine your body's actual needs. This calculator provides a more precise starting point by analyzing your specific profile.</p>
        <blockquote>
          "Sufficient intake of water is essential for most bodily functions... Recommendations for water intake are not one-size-fits-all but must be individualized."
          <br><em>- The National Academies of Sciences, Engineering, and Medicine</em>
        </blockquote>
        <h2 style="margin-top: 40px;">Frequently Asked Questions</h2>
        <div class="faq-item">
            <h3>How much water should you drink according to your weight?</h3>
            <p>Weight is a primary factor. A common guideline for adults is to drink between half an ounce and one ounce of water for each pound you weigh. For example, if you weigh 150 lbs, you would need 75 to 150 oz of water daily. Our calculator uses your weight as a baseline before factoring in other elements like activity.</p>
        </div>
        <div class="faq-item">
            <h3>Is 2 litres of water enough to drink each day?</h3>
            <p>For many, 2 liters (about 68 oz or 8 glasses) is a solid baseline and meets the general recommendations. However, this may be insufficient if you exercise intensely, live in a hot climate, or have a larger body size. A personalized calculation, like the one above, will give you a more accurate target.</p>
        </div>
        <div class="faq-item">
            <h3>Does coffee count as water intake?</h3>
            <p>Yes. A common myth is that caffeinated drinks don't count, but that's not true. Research from institutions like the Mayo Clinic confirms that the water in beverages like coffee and tea contributes to your daily total. While plain water is the best hydrator, other fluids also play a role.</p>
        </div>
      </section>
    </main>

    <footer style="text-align: center; margin-top: 30px; font-size: 0.8em; color: #6c757d;">
        <p>Â© 2025 waterintakecalc.com. All Rights Reserved. </p>
    </footer>
  </div>
  
   <script>
    // --- The final JavaScript logic with smart, age-aware validation ---
    let lastPayload = null;
    let lastResult = null; 

    document.getElementById('calc').onclick = async () => {
      const resultSection = document.getElementById('result-section');
      const resultPrimaryEl = resultSection.querySelector('.result-primary');
      const resultSecondaryEl = resultSection.querySelector('.result-secondary');
      const resultExplanationEl = resultSection.querySelector('.result-explanation');
      const aiButton = document.getElementById('ai-button');
      const aiResultEl = document.getElementById('ai-result');

      // --- NEW: SMART, AGE-AWARE VALIDATION LOGIC ---
      const ageInput = +document.getElementById('age').value;
      const weightInput = +document.getElementById('weight').value;
      const unit = document.getElementById('weightUnit').value;

      // 1. Validate Age first, as it determines weight validation rules.
      if (ageInput < 1 || ageInput > 120) {
        alert(`Please enter an age between 1 and 120.`);
        return; // Stop the function
      }

      // 2. Apply different weight validation based on age.
      if (ageInput >= 14) {
        // For adults, we apply the stricter validation.
        const MIN_WEIGHT_LBS = 50;
        const MAX_WEIGHT_LBS = 500;
        const MIN_WEIGHT_KG = 22;
        const MAX_WEIGHT_KG = 227;

        if (unit === 'lbs' && (weightInput < MIN_WEIGHT_LBS || weightInput > MAX_WEIGHT_LBS)) {
          alert(`For adults, please enter a weight between ${MIN_WEIGHT_LBS} and ${MAX_WEIGHT_LBS} lbs.`);
          return;
        }
        if (unit === 'kg' && (weightInput < MIN_WEIGHT_KG || weightInput > MAX_WEIGHT_KG)) {
          alert(`For adults, please enter a weight between ${MIN_WEIGHT_KG} and ${MAX_WEIGHT_KG} kg.`);
          return;
        }
      } else {
        // For children (< 14), weight is less critical. We use a much looser validation.
        const MIN_WEIGHT_LBS_CHILD = 10;
        const MAX_WEIGHT_LBS_CHILD = 200;
        const MIN_WEIGHT_KG_CHILD = 4;
        const MAX_WEIGHT_KG_CHILD = 90;
        
        if (unit === 'lbs' && (weightInput < MIN_WEIGHT_LBS_CHILD || weightInput > MAX_WEIGHT_LBS_CHILD)) {
          alert(`Please enter a realistic weight for a child (between ${MIN_WEIGHT_LBS_CHILD} and ${MAX_WEIGHT_LBS_CHILD} lbs).`);
          return;
        }
        if (unit === 'kg' && (weightInput < MIN_WEIGHT_KG_CHILD || weightInput > MAX_WEIGHT_KG_CHILD)) {
          alert(`Please enter a realistic weight for a child (between ${MIN_WEIGHT_KG_CHILD} and ${MAX_WEIGHT_KG_CHILD} kg).`);
          return;
        }
      }
      // --- END OF VALIDATION LOGIC ---

      // Reset result areas
      resultPrimaryEl.innerText = 'Calculating...';
      resultSecondaryEl.innerText = '';
      resultExplanationEl.innerText = '';
      aiButton.style.display = 'none';
      aiResultEl.style.display = 'none';
      
      resultSection.classList.add('visible');
      resultSection.scrollIntoView({ behavior: 'smooth', block: 'center' });

      const weightLbs = (unit === 'kg') ? weightInput * 2.20462 : weightInput;

      lastPayload = {
        age: ageInput,
        weightLbs: weightLbs,
        gender: document.getElementById('gender').value,
        activityLevel: document.getElementById('activityLevel').value,
        isTropical: document.getElementById('isTropical').checked
      };

      try {
        const response = await fetch('/api/calculate', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify(lastPayload)
        });
        const data = await response.json();
        if (!response.ok) throw new Error(data.error || 'Calculation failed.');
        
        lastResult = data; 
        
        resultPrimaryEl.innerText = data.displayText;
        if (data.totalOunces > 0) {
            resultSecondaryEl.innerText = `(approximately ${data.totalLiters} Liters)`;
        } else {
            resultSecondaryEl.innerText = '';
        }
        resultExplanationEl.innerText = data.explanationText || '';
        
        aiButton.style.display = 'block';
        aiButton.disabled = false;
        aiResultEl.innerText = '';

      } catch (error) {
        resultPrimaryEl.innerText = `Error`;
        resultSecondaryEl.innerText = '';
        resultExplanationEl.innerText = error.message;
      }
    };

    // The AI button's logic remains the same
    document.getElementById('ai-button').onclick = async () => {
        const aiButton = document.getElementById('ai-button');
        const aiResultEl = document.getElementById('ai-result');
        if (!lastPayload || !lastResult) return;

        aiButton.disabled = true;
        aiButton.innerText = 'ðŸ¤– Thinking...';
        aiResultEl.style.display = 'none';

        try {
            const aiPayload = {
                userProfile: lastPayload,
                calculationResult: lastResult
            };

            const response = await fetch('/api/advice', {
                method: 'POST',
                headers: {'Content-Type':'application/json'},
                body: JSON.stringify(aiPayload)
            });
            const data = await response.json();
            if (!response.ok) throw new Error(data.error || 'Failed to get AI advice.');
            
            aiResultEl.innerText = data.response;
            aiResultEl.style.display = 'block';
            aiResultEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        } catch (error) {
            aiResultEl.innerText = `Error: ${error.message}`;
        } finally {
            aiButton.disabled = false;
            aiButton.innerText = 'Get AI-Powered Hydration Tips';
        }
    };
  </script>
</body>
</html>
